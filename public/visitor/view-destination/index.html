<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono&display=swap">
    <link href="https://cdn.rawgit.com/michalsnik/aos/2.1.1/dist/aos.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Merienda' rel='stylesheet'>

    <title>Miviajea Vietnam</title>
    <link rel="icon" href="../images/logo.png">
</head>

<body data-spy="scroll" data-target=".navbar" data-offset="50">
    <div id="Welcome">
        <!---Start navigation Bar -->
        <nav class="navbar navbar-expand-lg navbar-fixed-top navbar-light bg-light">
            <a class="navbar-brand" href="/visitor">Miviajea Vietnam</a>

            <div class="ml-auto">
                <div class="dropdown">
                    <button class="btn only-pc dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
                            <path
                                d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" />
                        </svg>
                    </button>

                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <button class="btn btn-primary btn-block text-center dropdown-item"
                            style="color: #fff;background-color: #007bff;border-color: #007bff;" href="tel:++390000000">
                            <i class="fa fa-phone" aria-hidden="true"></i>+84 3304490623</button>
                        <button class="btn btn-success btn-block text-center dropdown-item"
                            style="color: #fff;background-color: #28a745;border-color: #28a745;"
                            href="https://api.whatsapp.com/send?phone=+390000000">
                            <i class="fab fa-whatsapp" aria-hidden="true"></i> Whatsapp</button>
                    </div>
                </div>
            </div>
        </nav>

        <div class="container pt-4">
            <div class="row">
                <div class="col-12">
                    <h1 class="text-center merienda-title" id="destination-name">Destination: </h1>
                </div>
            </div>
            <div class="row merienda-title pt-2">
                <div class="col-8" id="description">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla
                        condimentum, nisl sed tincidunt aliquam, nunc libero fermentum nunc, in
                        sollicitudin libero nunc nec libero. Nulla condimentum, nisl sed tincidunt
                        aliquam, nunc libero fermentum nunc, in sollicitudin libero nunc nec libero.
                        Nulla condimentum, nisl sed tincidunt aliquam, nunc libero fermentum nunc, in
                        sollicitudin libero nunc nec libero. Nulla condimentum, nisl sed tincidunt
                        aliquam, nunc libero fermentum nunc, in sollicitudin libero nunc nec libero.
                    </p>
                </div>
                <div class="col-4">
                    <img src="" id="avatar" class="img-fluid" alt="Responsive image" onclick="zoomImage(this)">
                </div>
            </div>
            <div class="row">
                <div class="col-12" id="content">
                    <p class="text-center">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla
                        condimentum, nisl sed tincidunt aliquam, nunc libero fermentum nunc, in
                        sollicitudin libero nunc nec libero. Nulla condimentum, nisl sed tincidunt
                        aliquam, nunc libero fermentum nunc, in sollicitudin libero nunc nec libero.
                        Nulla condimentum, nisl sed tincidunt aliquam, nunc libero fermentum nunc, in
                        sollicitudin libero nunc nec libero. Nulla condimentum, nisl sed tincidunt
                        aliquam, nunc libero fermentum nunc, in sollicitudin libero nunc nec libero.
                    </p>
                </div>
            </div>

            <div class="row row-cols-1 row-cols-md-5 g-4 pt-3" id="img-row">
                <!-- Image generate here -->
            </div>

            <div class="row pt-4">
                <div class="col-12">
                    <h1 class="text-center merienda-title" id="destination-name">Recommended hotels </h1>
                </div>
            </div>
            <div class="row hotel-list" id="hotel-list">
                <!-- List hotel here -->
            </div>

            <div class="row pt-4">
                <div class="col-12">
                    <h1 class="text-center merienda-title" id="restaurant-name">Recommended restaurants</h1>
                </div>
            </div>
            <div class="row restaurant-list" id="restaurant-list">
                <!-- List restaurant here -->
            </div>

            <!-- Tourist attractions here within a class card -->
            <div class="row pt-4">
                <div class="col-12">
                    <h1 class="text-center merienda-title" id="attractions-name">Tourist attractions</h1>
                </div>
            </div>
            <div class="row attractions-list" id="attractions-list">
                <!-- List restaurant here -->
            </div>
        </div>


        <!---End navigation Bar -->

        <div class="row footer bg-light">
            <div class="col">
                <p class="text-center">Follow us: <a class="social-icon">
                        <i class="fab fa-facebook"></i>
                    </a> <a class="social-icon"></a><i class="fab fa-instagram"></i></a></p>
            </div>
            <div class="col">
                <p class="text-center">Copyright &copy; 2024</p>
            </div>
            <div class="col">
                <p class="text-center">Powered by: Miviajea Vietnam</a></p>
            </div>
        </div>
    </div>
    <footer class="container">
        <div class="row only-mobile">
            <div class="col-6">
                <a class="btn btn-primary btn-block text-center" href="tel:++390000000"><i class="fa fa-phone"
                        aria-hidden="true"></i> Call</a>
            </div>
            <div class="col-6">
                <a class="btn btn-success btn-block text-center"
                    href="https://api.whatsapp.com/send?phone=+390000000"><i class="fab fa-whatsapp"
                        aria-hidden="true"></i> Whatsapp</a>
            </div>
        </div>
    </footer>

    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <script src="../../variables.js"></script>

    </script>

    <script>
        // get id from href ?id=1
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id');
        let hotelSection = 1;
        let restaurantSection = 1;
        if (id) {
            // fetch data from API
            fetch(apiDestinations + `/${id}`)
                .then(response => response.json())
                .then(response => response[0])
                .then(data => {
                    console.log(data);
                    document.getElementById('destination-name').innerText = `${data.Name}`;
                    document.getElementById('description').innerHTML = `<p>${data.Description}</p>`;
                    document.getElementById('content').innerHTML = `<p>${data.Content}</p>`;
                    document.getElementById('avatar').src = data.Avatar;
                    // generate images
                    const imgRow = document.getElementById('img-row');
                    data.Links.split(";").forEach(image => {
                        if (image === "") return;
                        const imgCol = document.createElement('div');
                        imgCol.classList.add('col');
                        imgCol.innerHTML = `
                                            <img src="${image}" onclick="zoomImage(this)" class="img-fluid" alt="...">
                                        `;
                        imgRow.appendChild(imgCol);
                    });
                    // generate hotels
                    const hotelList = document.getElementById('hotel-list');
                    JSON.parse(data.Hotels).forEach((hotel, index) => {
                        // Add 1 to the index to start from 1 instead of 0
                        index += 1;
                        hotelSection = index + 1;
                        const hotelRow = document.createElement('div');
                        hotelRow.classList.add('row');
                        hotelRow.innerHTML = `
                            <div class="col-sm-7 pt-3">
                                <p id="editor-${index}"></p>
                            </div>
                            <div class="col-sm-5 pt-1">
                                <div class="row row-cols-1 row-cols-md-2 g-4 pt-1" id="hotel-list-img-${index}">
                                    <!-- Hotels generate here -->
                                </div>
                            </div>
                        `;
                        hotelList.appendChild(hotelRow);
                        document.getElementById(`editor-${index}`).innerHTML = hotel.Description;
                        const hotelListImg = document.getElementById(`hotel-list-img-${index}`);
                        hotel.Links.split(";").forEach(image => {
                            if (image === "") return;
                            const imgCol = document.createElement('div');
                            imgCol.classList.add('col');
                            imgCol.innerHTML = `
                                <img src=${image} onclick="zoomImage(this)" class="img-fluid" alt="...">
                            `;
                            hotelListImg.appendChild(imgCol);
                        });
                    });

                    // generate restaurants
                    const resList = document.getElementById('restaurant-list');
                    JSON.parse(data.Restaurants).forEach((restaurant, index) => {
                        // Add 1 to the index to start from 1 instead of 0
                        index += 1;
                        const restaurantRow = document.createElement('div');
                        restaurantRow.classList.add('row');
                        restaurantRow.innerHTML = `
                            <div class="col-sm-7 pt-3">
                                <p id="editor-res-${restaurantSection}"></p>
                            </div>
                            <div class="col-sm-5 pt-1">
                                <div class="row row-cols-1 row-cols-md-2 g-4 pt-1" id="restaurant-list-img-${restaurantSection}">
                                    <!-- Restaurants generate here -->
                                </div>
                            </div>
                        `;
                        resList.appendChild(restaurantRow);
                        document.getElementById(`editor-res-${restaurantSection}`).innerHTML = restaurant.Description;
                        const restaurantListImg = document.getElementById(`restaurant-list-img-${restaurantSection}`);
                        restaurant.Links.split(";").forEach(image => {
                            if (image === "") return;
                            const imgCol = document.createElement('div');
                            imgCol.classList.add('col');
                            imgCol.innerHTML = `
                                <img src=${image} onclick="zoomImage(this)" class="img-fluid" alt="...">
                            `;
                            restaurantListImg.appendChild(imgCol);
                        });
                        restaurantSection++;
                    });

                    // generate attractions
                    const attractionsList = document.getElementById('attractions-list');
                    JSON.parse(data.Others).forEach((attraction, index) => {
                        // Add 1 to the index to start from 1 instead of 0
                        index += 1;
                        const attractionRow = document.createElement('div');
                        attractionRow.classList.add('row');
                        attractionRow.innerHTML = `
                            <div class="col-sm-7 pt-3">
                                <p id="editor-attr-${index}"></p>
                            </div>
                            <div class="col-sm-5 pt-1">
                                <div class="row row-cols-1 row-cols-md-2 g-4 pt-1" id="attractions-list-img-${index}">
                                    <!-- Attractions generate here -->
                                </div>
                            </div>
                        `;
                        attractionsList.appendChild(attractionRow);
                        document.getElementById(`editor-attr-${index}`).innerHTML = attraction.Description;
                        const attractionListImg = document.getElementById(`attractions-list-img-${index}`);
                        attraction.Links.split(";").forEach(image => {
                            if (image === "") return;
                            const imgCol = document.createElement('div');
                            imgCol.classList.add('col');
                            imgCol.innerHTML = `
                                <img src=${image} onclick="zoomImage(this)" class="img-fluid" alt="...">
                            `;
                            attractionListImg.appendChild(imgCol);
                        });
                    });

                });
        };

        function zoomImage(img) {
            // Create a modal to display the enlarged image
            var modal = document.createElement('div');
            modal.classList.add('modal');

            // Create an image element within the modal
            var modalImg = document.createElement('img');
            modalImg.src = img.src;
            modalImg.alt = img.alt;

            // Append the image to the modal
            modal.appendChild(modalImg);

            // Append the modal to the document body
            document.body.appendChild(modal);

            // Close the modal when clicked outside the image
            modal.onclick = function () {
                modal.remove();
            };
        }
    </script>
</body>

</html>